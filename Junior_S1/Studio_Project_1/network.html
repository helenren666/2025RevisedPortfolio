<!-- <!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ç»çº¬åº¦èŠ‚ç‚¹ç½‘ç»œ</title>
  <style>
    body { margin:0; background:black; color:white; overflow:hidden; }
    canvas { display:block; }
    button {
      position: absolute;
      top: 10px;
      left: 10px;
      padding: 8px 12px;
      background: red;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button onclick="goToMap()">å»åœ°å›¾</button>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <script>
    // ç»çº¬åº¦æ•°æ®
    const locations = [

  [37.5211456, -122.3140069], // 3130
  [37.5341627, -122.3350642], // CSM
  [37.6153981, -122.3898792], // SFO
  [40.6468596, -73.7799381],  // JFK
  [40.7357576, -73.9935817],  // dorm
  [40.7353472, -73.9935423],  // TNS
  [36.8968441, -111.4084904], // phonix
  [40.8203520, -73.9787350],   //samhome
   [37.3332482, -122.1089714] //13889
    ];

    let nodes = [];

    function setup() {
      createCanvas(windowWidth, windowHeight);
      textSize(12);
      fill(255);
      locations.forEach(([lat, lng]) => {
        nodes.push({
          x: random(width),
          y: random(height),
          dx: random(-1, 1),
          dy: random(-1, 1),
          lat, lng
        });
      });
    }

    function draw() {
      background(0);
      stroke(255, 100);
      // draw connections
      for (let i = 0; i < nodes.length; i++) {
        for (let j = i + 1; j < nodes.length; j++) {
          line(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
        }
      }
      // draw nodes
      noStroke();
      fill(255, 0, 0);
      nodes.forEach(n => {
        circle(n.x, n.y, 8);
        fill(255);
        text(`${n.lat.toFixed(2)},${n.lng.toFixed(2)}`, n.x + 10, n.y);
        n.x += n.dx;
        n.y += n.dy;
        if (n.x < 0 || n.x > width) n.dx *= -1;
        if (n.y < 0 || n.y > height) n.dy *= -1;
      });
    }

    function mousePressed() {
      // ç‚¹å‡»ç‚¹ï¼Œè·³åˆ° map.html
      for (let n of nodes) {
        if (dist(mouseX, mouseY, n.x, n.y) < 10) {
          window.location.href = `map.html?lat=${n.lat}&lng=${n.lng}`;
        }
      }
    }

    function goToMap() {
      // é»˜è®¤è·³åˆ°ç¬¬ä¸€ä¸ªç‚¹
      const n = nodes[0];
      window.location.href = `map.html?lat=${n.lat}&lng=${n.lng}`;
    }
  </script>
</body>
</html> -->


<!-- 
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ç»çº¬åº¦èŠ‚ç‚¹ç½‘ç»œ</title>
  <style>
    body { margin:0; background:black; color:white; overflow:hidden; }
    canvas { display:block; }
    button {
      position: absolute;
      top: 10px;
      left: 10px;
      padding: 8px 12px;
      background: red;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button onclick="goToMap()">å»åœ°å›¾</button>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <script>
    // ç»çº¬åº¦æ•°æ®ï¼ˆç¼–å· = index+1ï¼‰
    const locations = [
      [37.5211456, -122.3140069], // 1 â†’ 3130
      [37.5341627, -122.3350642], // 2 â†’ CSM
      [37.6153981, -122.3898792], // 3 â†’ SFO
      [40.6468596, -73.7799381],  // 4 â†’ JFK
      [40.7357576, -73.9935817],  // 5 â†’ dorm
      [40.7353472, -73.9935423],  // 6 â†’ The New School
      [36.8968441, -111.4084904], // 7 â†’ phonix
      [40.8203520, -73.9787350],  // 8 â†’ sam home
      [37.3332482, -122.1089714]  // 9 â†’ home 13889
    ];

    // å®šä¹‰è¿çº¿å…³ç³» (ç¼–å·ä»1å¼€å§‹)
    const edges = {
      1: [2, 3, 9],  // èŠ‚ç‚¹1è¿2,3,9
      // 2: [1],        // èŠ‚ç‚¹2è¿1
      // 3: [1, 4],     // èŠ‚ç‚¹3è¿1,4
      // 5: [6],        // èŠ‚ç‚¹5è¿6
      // 6: [5],        // èŠ‚ç‚¹6è¿5
      // 7: [8],        // èŠ‚ç‚¹7è¿8
      // 8: [7],        // èŠ‚ç‚¹8è¿7
      // 9: [1]         // èŠ‚ç‚¹9è¿1
    };

    let nodes = [];

    function setup() {
      createCanvas(windowWidth, windowHeight);
      textSize(12);
      fill(255);
      locations.forEach(([lat, lng]) => {
        nodes.push({
          x: random(width),
          y: random(height),
          dx: random(-1, 1),
          dy: random(-1, 1),
          lat, lng
        });
      });
    }

    function draw() {
      background(0);

      // æ ¹æ® edges ç”»æœ‰å…³ç³»çš„çº¿
      stroke(255, 100);
      for (let i = 0; i < nodes.length; i++) {
        const connections = edges[i + 1]; // å› ä¸ºç¼–å·æ˜¯1å¼€å§‹
        if (connections) {
          connections.forEach(j => {
            line(nodes[i].x, nodes[i].y, nodes[j - 1].x, nodes[j - 1].y);
          });
        }
      }

      // ç”»èŠ‚ç‚¹
      noStroke();
      fill(255, 0, 0);
      nodes.forEach((n, idx) => {
        circle(n.x, n.y, 8);
        fill(255);
        text(`${n.lat.toFixed(2)}, ${n.lng.toFixed(2)}`, n.x + 10, n.y);
        n.x += n.dx;
        n.y += n.dy;
        if (n.x < 0 || n.x > width) n.dx *= -1;
        if (n.y < 0 || n.y > height) n.dy *= -1;
      });
    }

    function mousePressed() {
      // ç‚¹å‡»ç‚¹ï¼Œè·³åˆ° map.html
      for (let i = 0; i < nodes.length; i++) {
        if (dist(mouseX, mouseY, nodes[i].x, nodes[i].y) < 10) {
          window.location.href = `map.html?lat=${nodes[i].lat}&lng=${nodes[i].lng}`;
        }
      }
    }

    function goToMap() {
      // é»˜è®¤è·³åˆ°ç¬¬ä¸€ä¸ªç‚¹
      const n = nodes[0];
      window.location.href = `map.html?lat=${n.lat}&lng=${n.lng}`;
    }
  </script>
</body>
</html> -->








<!-- 


<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Futuristic Network</title>
  <style>
    body { margin:0; background:black; overflow:hidden; }
    canvas { display:block; }
  </style>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script>
let nodes = [];
let words = ["AI", "DATA", "NODE", "âˆ", "01", "LINK"];

function setup() {
  createCanvas(windowWidth, windowHeight);
  noStroke();

  // åˆ›å»ºä¸€å †èŠ‚ç‚¹
  for (let i = 0; i < 80; i++) {
    nodes.push({
      x: random(width),
      y: random(height),
      dx: random(-1.5, 1.5),
      dy: random(-1.5, 1.5),
      r: random([6, 10, 14, 20]), // å¤§å°ç±»åˆ«
      color: color(random(100,255), random(100,255), random(255)),
      word: random(words),
      phase: random(TWO_PI) // ç”¨äºé—ªçƒ/è„‰åŠ¨
    });
  }
}

function draw() {
  background(10, 20, 30, 200); // æ·±è‰²èƒŒæ™¯

  // ç”»è¿çº¿
  for (let i = 0; i < nodes.length; i++) {
    for (let j = i+1; j < nodes.length; j++) {
      let d = dist(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
      if (d < 150) {
        stroke(100, 200, 255, map(d, 0, 150, 200, 0)); // è“è‰²æ¸éš
        line(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
      }
    }
  }

  noStroke();
  // ç”»èŠ‚ç‚¹
  nodes.forEach(n => {
    // è„‰åŠ¨å¤§å°
    let pulse = sin(frameCount*0.05 + n.phase) * 2;

    // å…‰æ™•
    fill(red(n.color), green(n.color), blue(n.color), 80);
    ellipse(n.x, n.y, n.r*3 + pulse);

    // å®å¿ƒç‚¹
    fill(n.color);
    ellipse(n.x, n.y, n.r + pulse);

    // æ–‡å­—
    fill(200, 255, 255, 200);
    textSize(12);
    text(n.word, n.x + n.r+5, n.y);

    // ç§»åŠ¨
    n.x += n.dx;
    n.y += n.dy;
    if (n.x < 0 || n.x > width) n.dx *= -1;
    if (n.y < 0 || n.y > height) n.dy *= -1;
  });
}
</script>
</body>
</html>  -->


<!-- 
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Watercolor Network</title>
  <style>
    body { margin:0; overflow:hidden; }
    canvas { display:block; }
  </style>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script>
let nodes = [];
let bg;

function preload() {
  bg = loadImage("watercolor.jpg"); // ä½ çš„æ°´å½©èƒŒæ™¯å›¾
}

function setup() {
  createCanvas(windowWidth, windowHeight);

  // ç”Ÿæˆå¾ˆå¤šèŠ‚ç‚¹
  for (let i = 0; i < 50; i++) {
    nodes.push({
      x: random(width),
      y: random(height),
      dx: random(-1, 1),
      dy: random(-1, 1),
      r: random([8, 12, 16]),
      color: [random(100,255), random(100,255), random(200,255)]
    });
  }
}

function draw() {
  background(255);
  image(bg, 0, 0, width, height); // èƒŒæ™¯å›¾

  // è¿çº¿ï¼ˆè¿‘è·ç¦»æ‰è¿ï¼‰
  for (let i = 0; i < nodes.length; i++) {
    for (let j = i+1; j < nodes.length; j++) {
      let d = dist(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
      if (d < 120) {
        stroke(50, 80, 120, map(d, 0, 120, 180, 0));
        line(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
      }
    }
  }

  noStroke();
  nodes.forEach(n => {
    // ğŸŒˆ ç”¨å¾„å‘æ¸å˜ç”»â€œæ°´å½©æ™•æŸ“â€æ•ˆæœ
    let g = drawingContext.createRadialGradient(n.x, n.y, 0, n.x, n.y, n.r*3);
    g.addColorStop(0, `rgba(${n.color[0]}, ${n.color[1]}, ${n.color[2]}, 1)`);
    g.addColorStop(1, `rgba(${n.color[0]}, ${n.color[1]}, ${n.color[2]}, 0)`);
    drawingContext.fillStyle = g;
    ellipse(n.x, n.y, n.r*6);

    // ä¸­å¿ƒå®å¿ƒç‚¹
    fill(n.color[0], n.color[1], n.color[2]);
    ellipse(n.x, n.y, n.r);

    // ç§»åŠ¨
    n.x += n.dx;
    n.y += n.dy;
    if (n.x < 0 || n.x > width) n.dx *= -1;
    if (n.y < 0 || n.y > height) n.dy *= -1;
  });
}
</script>
</body>
</html> -->

<!-- 
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Watercolor Network</title>
  <style>
    body { margin:0; overflow:hidden; }
    canvas { display:block; }
  </style>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script>
let nodes = [];
let bg;

// 9 ä¸ªçœŸå®ç»çº¬åº¦
const locations = [
  [37.5211456, -122.3140069], // 1 â†’ 3130
  [37.5341627, -122.3350642], // 2 â†’ CSM
  [37.6153981, -122.3898792], // 3 â†’ SFO
  [40.6468596, -73.7799381],  // 4 â†’ JFK
  [40.7357576, -73.9935817],  // 5 â†’ dorm
  [40.7353472, -73.9935423],  // 6 â†’ The New School
  [36.8968441, -111.4084904], // 7 â†’ phonix
  [40.8203520, -73.9787350],  // 8 â†’ sam home
  [37.3332482, -122.1089714]  // 9 â†’ home 13889
];

function preload() {
  bg = loadImage("watercolor.jpg"); // èƒŒæ™¯å›¾
}

function setup() {
  createCanvas(windowWidth, windowHeight);

  // æ¯ä¸ªç‚¹é‡å¤ 4 æ¬¡ â†’ æ€»å…± 36 ä¸ª
  for (let rep = 0; rep < 4; rep++) {
    for (let i = 0; i < locations.length; i++) {
      let lat = locations[i][0];
      let lng = locations[i][1];

      // âœ… åœ¨è¿™é‡ŒåŠ å…¥é¢œè‰²é€»è¾‘
      let c;
      if ([1, 9].includes(i+1)) {
        c = [55, 68, 163]; // è“è‰²
      } else if ([2, 6, 7, 8].includes(i+1)) {
        c = [244, 115, 250]; // çº¢è‰²
      } else if ([3, 4, 5].includes(i+1)) {
        c = [167, 88, 245]; // é»„è‰²
      }

      // èŠ‚ç‚¹å±æ€§
      nodes.push({
        x: random(width),
        y: random(height),
        dx: random(-1, 1),
        dy: random(-1, 1),
        r: random([6, 14, 28]),   // åœ†ç‚¹å¤§å°å¤¸å¼ ä¸€äº›
        color: c,                 // ğŸ¨ ä½¿ç”¨åˆ†ç±»é¢œè‰²
        lat: lat,
        lng: lng
      });
    }
  }
}


function draw() {
  background(255);
  image(bg, 0, 0, width, height);

  // è¿çº¿ï¼ˆè¿‘è·ç¦»æ‰è¿ï¼‰
  for (let i = 0; i < nodes.length; i++) {
    for (let j = i+1; j < nodes.length; j++) {
      let d = dist(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
      if (d < 120) {
        stroke(50, 80, 120, map(d, 0, 120, 180, 0));
        line(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
      }
    }
  }

  noStroke();
  nodes.forEach(n => {
    // æ°´å½©æ™•æŸ“ï¼šå¾„å‘æ¸å˜
    let g = drawingContext.createRadialGradient(n.x, n.y, 0, n.x, n.y, n.r*3);
    g.addColorStop(0, `rgba(${n.color[0]}, ${n.color[1]}, ${n.color[2]}, 1)`);
    g.addColorStop(1, `rgba(${n.color[0]}, ${n.color[1]}, ${n.color[2]}, 0)`);
    drawingContext.fillStyle = g;
    ellipse(n.x, n.y, n.r*6);

    // ä¸­å¿ƒç‚¹
    fill(n.color[0], n.color[1], n.color[2]);
    ellipse(n.x, n.y, n.r);

    // ç»çº¬åº¦æ–‡å­—
    fill(255, 200); // ç™½è‰²ï¼ŒåŠé€æ˜
    textSize(n.r * 1.);  // å­—å·è·Ÿåœ†ç‚¹åŠå¾„æˆæ¯”ä¾‹
    textAlign(CENTER, TOP);
    // text(`${n.lat.toFixed(2)}, ${n.lng.toFixed(2)}`, n.x+10, n.y);
    text(`${n.lat.toFixed(2)}, ${n.lng.toFixed(2)}`, n.x, n.y + n.r + 0.1);
    textStyle('italic');

    // ç§»åŠ¨
    n.x += n.dx;
    n.y += n.dy;
    if (n.x < 0 || n.x > width) n.dx *= -1;
    if (n.y < 0 || n.y > height) n.dy *= -1;
  });
}

// ç‚¹å‡» â†’ è·³åˆ° map.html
function mousePressed() {
  for (let i = 0; i < nodes.length; i++) {
    if (dist(mouseX, mouseY, nodes[i].x, nodes[i].y) < nodes[i].r/2) {
      window.location.href = `map.html?lat=${nodes[i].lat}&lng=${nodes[i].lng}`;
    }
  }
}
</script>
</body>
</html> -->



<!-- 

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Watercolor Network with Groups</title>
  <style>
    body { margin:0; overflow:hidden; }
    canvas { display:block; }
  </style>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script>
let nodes = [];
let bg;

// 9 ä¸ªçœŸå®ç»çº¬åº¦
const locations = [
  [37.5211456, -122.3140069], // 1 â†’ 3130
  [37.5341627, -122.3350642], // 2 â†’ CSM
  [37.6153981, -122.3898792], // 3 â†’ SFO
  [40.6468596, -73.7799381],  // 4 â†’ JFK
  [40.7357576, -73.9935817],  // 5 â†’ dorm
  [40.7353472, -73.9935423],  // 6 â†’ The New School
  [36.8968441, -111.4084904], // 7 â†’ phonix
  [40.8203520, -73.9787350],  // 8 â†’ sam home
  [37.3332482, -122.1089714]  // 9 â†’ home 13889
];

// âœ… å®šä¹‰è¾¹ï¼ˆé€»è¾‘è¿æ¥ï¼‰
const edges = [
  { from: 1, to: 2, color: [167, 88, 245] },   // ç´«è‰²
  { from: 1, to: 3, color: [55, 68, 163] },    // è“è‰²
  { from: 1, to: 9, color: [244, 115, 250] },  // ç²‰è‰²
  { from: 4, to: 3, color: [167, 88, 245] },   // ç´«è‰²
  { from: 4, to: 5, color: [55, 68, 163] },    // è“è‰²
  { from: 5, to: 6, color: [167, 88, 245] },   // ç´«è‰²
  { from: 3, to: 7, color: [244, 115, 250] },  // ç²‰è‰²
  { from: 3, to: 9, color: [167, 88, 245] }    // ç´«è‰²
];

function preload() {
  bg = loadImage("watercolor.jpg"); // èƒŒæ™¯å›¾
}

function setup() {
  createCanvas(windowWidth, windowHeight);

  // æ¯ä¸ªç‚¹é‡å¤ 4 æ¬¡ â†’ æ€»å…± 36 ä¸ª
  for (let rep = 0; rep < 4; rep++) {
    for (let i = 0; i < locations.length; i++) {
      let lat = locations[i][0];
      let lng = locations[i][1];

      // é¢œè‰²é€»è¾‘
      let c;
      if ([1, 9].includes(i+1)) {
        c = [55, 68, 163]; // è“è‰²
      } else if ([2, 6, 7, 8].includes(i+1)) {
        c = [244, 115, 250]; // ç²‰è‰²
      } else if ([3, 4, 5].includes(i+1)) {
        c = [167, 88, 245]; // ç´«è‰²
      }

      // èŠ‚ç‚¹å±æ€§
      nodes.push({
        id: i+1,   // èŠ‚ç‚¹ç¼–å· (1-9)
        rep: rep,  // ç¬¬å‡ ä»½ (0-3)
        x: random(width),
        y: random(height),
        dx: random(-1, 1),
        dy: random(-1, 1),
        r: random([6, 14, 28]),   // å°ºå¯¸å·®å¼‚
        color: c,
        lat: lat,
        lng: lng
      });
    }
  }
}

function draw() {
  background(255);
  image(bg, 0, 0, width, height);

  // âœ… åˆ†ç»„å†…éƒ¨è¿çº¿
  for (let rep = 0; rep < 4; rep++) {
    edges.forEach(edge => {
      let fromNode = nodes.find(n => n.id === edge.from && n.rep === rep);
      let toNode = nodes.find(n => n.id === edge.to && n.rep === rep);

      if (fromNode && toNode) {
        stroke(edge.color[0], edge.color[1], edge.color[2], 180);
        line(fromNode.x, fromNode.y, toNode.x, toNode.y);
      }
    });
  }

  noStroke();
  nodes.forEach(n => {
    // æ°´å½©æ™•æŸ“
    let g = drawingContext.createRadialGradient(n.x, n.y, 0, n.x, n.y, n.r*3);
    g.addColorStop(0, `rgba(${n.color[0]}, ${n.color[1]}, ${n.color[2]}, 1)`);
    g.addColorStop(1, `rgba(${n.color[0]}, ${n.color[1]}, ${n.color[2]}, 0)`);
    drawingContext.fillStyle = g;
    ellipse(n.x, n.y, n.r*6);

    // ä¸­å¿ƒç‚¹
    fill(n.color[0], n.color[1], n.color[2]);
    ellipse(n.x, n.y, n.r);

    // ç»çº¬åº¦æ–‡å­—
    fill(255, 220);
    textSize(n.r * 0.6);
    textAlign(CENTER, TOP);
    text(`${n.lat.toFixed(2)}, ${n.lng.toFixed(2)}`, n.x, n.y + n.r + 4);

    // ç§»åŠ¨
    n.x += n.dx;
    n.y += n.dy;
    if (n.x < 0 || n.x > width) n.dx *= -1;
    if (n.y < 0 || n.y > height) n.dy *= -1;
  });
}

// ç‚¹å‡» â†’ è·³åˆ° map.html
function mousePressed() {
  for (let i = 0; i < nodes.length; i++) {
    if (dist(mouseX, mouseY, nodes[i].x, nodes[i].y) < nodes[i].r) {
      window.location.href = `map.html?lat=${nodes[i].lat}&lng=${nodes[i].lng}`;
    }
  }
}
</script>
</body>
</html> -->


<!-- 
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Watercolor Network with Fixed Sizes</title>
  <style>
    body { margin:0; overflow:hidden; }
    canvas { display:block; }
  </style>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script>
let nodes = [];
let bg;

// 9 ä¸ªçœŸå®ç»çº¬åº¦
const locations = [
  [37.5211456, -122.3140069], // 1 â†’ 3130
  [37.5341627, -122.3350642], // 2 â†’ CSM
  [37.6153981, -122.3898792], // 3 â†’ SFO
  [40.6468596, -73.7799381],  // 4 â†’ JFK
  [40.7357576, -73.9935817],  // 5 â†’ dorm
  [40.7353472, -73.9935423],  // 6 â†’ The New School
  [36.8968441, -111.4084904], // 7 â†’ phonix
  [40.8203520, -73.9787350],  // 8 â†’ sam home
  [37.3332482, -122.1089714]  // 9 â†’ home 13889
];

// âœ… å®šä¹‰è¾¹ï¼ˆé€»è¾‘è¿æ¥ï¼‰
const edges = [
  { from: 1, to: 2, color: [167, 88, 245] },   // ç´«è‰²
  { from: 1, to: 3, color: [55, 68, 163] },    // è“è‰²
  { from: 1, to: 9, color: [244, 115, 250] },  // ç²‰è‰²
  { from: 4, to: 3, color: [167, 88, 245] },   // ç´«è‰²
  { from: 4, to: 5, color: [55, 68, 163] },    // è“è‰²
  { from: 5, to: 6, color: [167, 88, 245] },   // ç´«è‰²
  { from: 3, to: 7, color: [244, 115, 250] },  // ç²‰è‰²
  { from: 3, to: 9, color: [167, 88, 245] }    // ç´«è‰²
];

function preload() {
  bg = loadImage("watercolor.jpg"); // èƒŒæ™¯å›¾
}

function setup() {
  createCanvas(windowWidth, windowHeight);

  // æ¯ä¸ªç‚¹é‡å¤ 4 æ¬¡ â†’ æ€»å…± 36 ä¸ª
  for (let rep = 0; rep < 4; rep++) {
    for (let i = 0; i < locations.length; i++) {
      let lat = locations[i][0];
      let lng = locations[i][1];

      // ğŸ¨ é¢œè‰²é€»è¾‘
      let c;
      if ([1, 9].includes(i+1)) {
        c = [55, 68, 163]; // è“è‰²
      } else if ([2, 6, 7, 8].includes(i+1)) {
        c = [244, 115, 250]; // ç²‰è‰²
      } else if ([3, 4, 5].includes(i+1)) {
        c = [167, 88, 245]; // ç´«è‰²
      }

      // ğŸ”‘ å¤§å°é€»è¾‘
      let r;
      if ([1, 6, 9].includes(i+1)) {
        r = 28; // å¤§ç‚¹ = å‘†å¾ˆä¹…
      } else if ([2, 5].includes(i+1)) {
        r = 16; // ä¸­ç­‰ = å‘†ä¸­ç­‰æ—¶é—´
      } else {
        r = 8;  // å° = å‘†å¾ˆçŸ­
      }

      // èŠ‚ç‚¹å±æ€§
      nodes.push({
        id: i+1,   // èŠ‚ç‚¹ç¼–å· (1-9)
        rep: rep,  // ç¬¬å‡ ä»½ (0-3)
        x: random(width),
        y: random(height),
        dx: random(-1, 1),
        dy: random(-1, 1),
        r: r,
        color: c,
        lat: lat,
        lng: lng,
        speedFactor: 1
      });
    }
  }
}

function draw() {
  background(255);
  image(bg, 0, 0, width, height);

  // âœ… åˆ†ç»„å†…éƒ¨è¿çº¿
  for (let rep = 0; rep < 4; rep++) {
    edges.forEach(edge => {
      let fromNode = nodes.find(n => n.id === edge.from && n.rep === rep);
      let toNode = nodes.find(n => n.id === edge.to && n.rep === rep);

      if (fromNode && toNode) {
        stroke(edge.color[0], edge.color[1], edge.color[2], 180);
        line(fromNode.x, fromNode.y, toNode.x, toNode.y);

        // ğŸ¯ åŠ¨æ€é€Ÿåº¦é€»è¾‘
        let c1 = fromNode.color;
        let c2 = toNode.color;
        if (c1[0]===c2[0] && c1[1]===c2[1] && c1[2]===c2[2]) {
          if (c1[0]===55 && c1[1]===68 && c1[2]===163) { // è“è‰²
            fromNode.speedFactor = 0.2;
            toNode.speedFactor = 0.2;
          } else {
            fromNode.speedFactor = 3; // ç²‰è‰²/ç´«è‰²ä¸€è‡´ â†’ å¿«
            toNode.speedFactor = 3;
          }
        } else {
          fromNode.speedFactor = 1;
          toNode.speedFactor = 1;
        }
      }
    });
  }

  noStroke();
  nodes.forEach(n => {
    // æ°´å½©æ™•æŸ“
    let g = drawingContext.createRadialGradient(n.x, n.y, 0, n.x, n.y, n.r*3);
    g.addColorStop(0, `rgba(${n.color[0]}, ${n.color[1]}, ${n.color[2]}, 1)`);
    g.addColorStop(1, `rgba(${n.color[0]}, ${n.color[1]}, ${n.color[2]}, 0)`);
    drawingContext.fillStyle = g;
    ellipse(n.x, n.y, n.r*6);

    // ä¸­å¿ƒç‚¹
    fill(n.color[0], n.color[1], n.color[2]);
    ellipse(n.x, n.y, n.r);

    // ç»çº¬åº¦æ–‡å­—
    fill(255, 220);
    textSize(n.r * 0.6);  // å­—ä½“éšç‚¹å¤§å°
    textAlign(CENTER, TOP);
    text(`${n.lat.toFixed(2)}, ${n.lng.toFixed(2)}`, n.x, n.y + n.r + 4);
    textfont('italic');

    // ç§»åŠ¨
    n.x += n.dx * n.speedFactor;
    n.y += n.dy * n.speedFactor;
    if (n.x < 0 || n.x > width) n.dx *= -1;
    if (n.y < 0 || n.y > height) n.dy *= -1;
  });
}

// ç‚¹å‡» â†’ è·³åˆ° map.html
function mousePressed() {
  for (let i = 0; i < nodes.length; i++) {
    if (dist(mouseX, mouseY, nodes[i].x, nodes[i].y) < nodes[i].r) {
      window.location.href = `map.html?lat=${nodes[i].lat}&lng=${nodes[i].lng}`;
    }
  }
}
</script>
</body>
</html> -->




<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Watercolor Network with Groups</title>
  <style>
    body { margin:0; overflow:hidden; }
    canvas { display:block; }
  </style>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script>
let nodes = [];
let bg;

// 9 ä¸ªçœŸå®ç»çº¬åº¦
const locations = [
  [37.5211456, -122.3140069], // 1 â†’ 3130
  [37.5341627, -122.3350642], // 2 â†’ CSM
  [37.6153981, -122.3898792], // 3 â†’ SFO
  [40.6468596, -73.7799381],  // 4 â†’ JFK
  [40.7357576, -73.9935817],  // 5 â†’ dorm
  [40.7353472, -73.9935423],  // 6 â†’ The New School
  [36.8968441, -111.4084904], // 7 â†’ phonix
  [40.8203520, -73.9787350],  // 8 â†’ sam home
  [37.3332482, -122.1089714]  // 9 â†’ home 13889
];

// âœ… å®šä¹‰è¾¹ï¼ˆé€»è¾‘è¿æ¥ï¼‰
const edges = [
  { from: 1, to: 2, color: [167, 88, 245] },   // ç´«è‰²
  { from: 1, to: 3, color: [55, 68, 163] },    // è“è‰²
  { from: 1, to: 9, color: [244, 115, 250] },  // ç²‰è‰²
  { from: 4, to: 3, color: [167, 88, 245] },   // ç´«è‰²
  { from: 4, to: 5, color: [55, 68, 163] },    // è“è‰²
  { from: 5, to: 6, color: [167, 88, 245] },   // ç´«è‰²
  { from: 3, to: 7, color: [244, 115, 250] },  // ç²‰è‰²
  { from: 3, to: 9, color: [167, 88, 245] }    // ç´«è‰²
];

function preload() {
  bg = loadImage("watercolor.jpg"); // èƒŒæ™¯å›¾
}

function setup() {
  createCanvas(windowWidth, windowHeight);

  // æ¯ä¸ªç‚¹é‡å¤ 4 æ¬¡ â†’ æ€»å…± 36 ä¸ª
  for (let rep = 0; rep < 4; rep++) {
    for (let i = 0; i < locations.length; i++) {
      let lat = locations[i][0];
      let lng = locations[i][1];

      // é¢œè‰²é€»è¾‘
      let c;
      if ([1, 9].includes(i+1)) {
        c = [55, 68, 163]; // è“è‰²
      } else if ([2, 6, 7, 8].includes(i+1)) {
        c = [244, 115, 250]; // ç²‰è‰²
      } else if ([3, 4, 5].includes(i+1)) {
        c = [167, 88, 245]; // ç´«è‰²
      }

      // èŠ‚ç‚¹å±æ€§
      nodes.push({
        id: i+1,   // èŠ‚ç‚¹ç¼–å· (1-9)
        rep: rep,  // ç¬¬å‡ ä»½ (0-3)
        x: random(width),
        y: random(height),
        dx: random(-1, 1),
        dy: random(-1, 1),
        r: random([6, 14, 28]),   // å°ºå¯¸å·®å¼‚
        color: c,
        lat: lat,
        lng: lng
      });
    }
  }
}

function draw() {
  background(255);
  image(bg, 0, 0, width, height);

  // âœ… åˆ†ç»„å†…éƒ¨è¿çº¿
  for (let rep = 0; rep < 4; rep++) {
    edges.forEach(edge => {
      let fromNode = nodes.find(n => n.id === edge.from && n.rep === rep);
      let toNode = nodes.find(n => n.id === edge.to && n.rep === rep);

      if (fromNode && toNode) {
        stroke(edge.color[0], edge.color[1], edge.color[2], 180);
        line(fromNode.x, fromNode.y, toNode.x, toNode.y);
      }
    });
  }

  noStroke();
  nodes.forEach(n => {
    // æ°´å½©æ™•æŸ“
    let g = drawingContext.createRadialGradient(n.x, n.y, 0, n.x, n.y, n.r*3);
    g.addColorStop(0, `rgba(${n.color[0]}, ${n.color[1]}, ${n.color[2]}, 1)`);
    g.addColorStop(1, `rgba(${n.color[0]}, ${n.color[1]}, ${n.color[2]}, 0)`);
    drawingContext.fillStyle = g;
    ellipse(n.x, n.y, n.r*6);

    // ä¸­å¿ƒç‚¹
    fill(n.color[0], n.color[1], n.color[2]);
    ellipse(n.x, n.y, n.r);

    // ç»çº¬åº¦æ–‡å­—
    fill(255, 220);
    textSize(n.r * 0.6);
    textAlign(CENTER, TOP);
    text(`${n.lat.toFixed(2)}, ${n.lng.toFixed(2)}`, n.x, n.y + n.r + 4);
    textstyle('italic');

    // ç§»åŠ¨
    n.x += n.dx;
    n.y += n.dy;
    if (n.x < 0 || n.x > width) n.dx *= -1;
    if (n.y < 0 || n.y > height) n.dy *= -1;
  });
}

// ç‚¹å‡» â†’ è·³åˆ° map.html
function mousePressed() {
  for (let i = 0; i < nodes.length; i++) {
    if (dist(mouseX, mouseY, nodes[i].x, nodes[i].y) < nodes[i].r) {
      window.location.href = `map.html?lat=${nodes[i].lat}&lng=${nodes[i].lng}`;
    }
  }
}
</script>
</body>
</html>
