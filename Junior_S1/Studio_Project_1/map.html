<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>我的地点地图</title>
  <!-- Leaflet 样式 -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map {
      height: 100vh;  /* 让地图全屏 */
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // 定义你的坐标数组
    const locations = [
      [37.5211456, -122.3140069],
      [37.5341627, -122.3350642],
      [37.6153981, -122.3898792],
      [40.6468596, -73.7799381],
      [40.7357576, -73.9935817],
      [40.6793263, -73.8040060],
      [40.7356637, -73.9935472],
      [37.5615218, -122.274656],
      [37.7279010, -122.453049],
      [37.4536517, -122.1776164],
      [40.7352494, -73.9934502],
      [40.6468596, -73.7799381],
      [37.5036465, -122.4946890],
      [40.7172701, -73.9994661],
      [40.7357576, -73.9935817],
      [40.7353472, -73.9935423],
      [40.7675325, -73.9391115],
      [37.3332482, -122.1089714],
      [36.8968441, -111.4084904],
      [40.7544588, -73.9874241],
      [40.8203520, -73.9787350]
    ];

    // 初始化地图（这里以第一个点为中心）
    const map = L.map('map').setView(locations[0], 5);

    // 添加底图图层 (OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '© OpenStreetMap'
    }).addTo(map);

    // 遍历所有地点，加红色圆点
    locations.forEach(([lat, lng], index) => {
      L.circleMarker([lat, lng], {
        color: 'red',
        radius: 6,
        fillColor: 'red',
        fillOpacity: 0.8
      }).addTo(map)
        .bindPopup(`地点 ${index + 1}`);
    });
    
    // 获取 URL 参数
const urlParams = new URLSearchParams(window.location.search);
const lat = parseFloat(urlParams.get("lat"));
const lng = parseFloat(urlParams.get("lng"));

if (!isNaN(lat) && !isNaN(lng)) {
  // 把地图中心移动到点击的点
  map.setView([lat, lng], 13);

  // 给这个点画一个高亮的黄色圆圈
  L.circleMarker([lat, lng], {
    color: 'yellow',
    radius: 10,
    fillColor: 'yellow',
    fillOpacity: 0.9
  }).addTo(map).bindPopup("你点击的点").openPopup();
}

  </script>
</body>
</html>
